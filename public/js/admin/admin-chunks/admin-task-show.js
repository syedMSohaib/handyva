(self.webpackChunk=self.webpackChunk||[]).push([[368],{9551:(t,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>r});function e(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,s){if(!t)return;if("string"==typeof t)return i(t,s);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return i(t,s)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,s){(null==s||s>t.length)&&(s=t.length);for(var a=0,e=new Array(s);a<s;a++)e[a]=t[a];return e}const n={data:function(){return{charge:1,task:void 0,users:[],countries:window.info.countries,timezones:window.info.timezones,hours:e(Array(24).keys()),minutes:e(Array(60).keys()),clients:[],note:"",baseUrl:window.axios.defaults.baseURL}},components:{},mounted:function(){this.getTask(),this.getUser()},methods:{makeTaskExtensive:function(){var t=this;axios.get("/task/".concat(this.$route.params.id,"/extensive-task")).then((function(s){var a=s.data;t.$toastr.success(a.message,"Success",{}),t.getTask()})).catch((function(s){console.log(s);var a=s.response.data.errors;Object.keys(a).forEach((function(s){t.$toastr.error(a[s],"Error!")}))}))},deleteNote:function(t){var s=this;this.$dialog.confirm("Are you sure you want to this internal note ? The Action is irreversible").then((function(a){axios.delete("/task/".concat(t,"/delete-note")).then((function(t){s.getTask(),s.$toastr.success(t.data.message,"Success",{}),a.close()})).catch((function(t){}))}))},addNote:function(){var t=this;axios.post("/task/".concat(this.$route.params.id,"/add-note"),{user_id:this.task.user_id,note:this.note,task_id:this.$route.params.id}).then((function(s){s.data;t.note="",t.getTask()})).catch((function(s){console.log(s);var a=s.response.data.errors;Object.keys(a).forEach((function(s){t.$toastr.error(a[s],"Error!")}))}))},changeStatus:function(t){var s=this;axios.post("/task/".concat(this.$route.params.id,"/update-status"),{status:this.task.status}).then((function(t){t.data;s.getTask()}))},assignResource:function(t){var s=this;this.task.user_id?axios.post("/task/".concat(this.$route.params.id,"/assign-resource"),{user_id:this.task.user_id}).then((function(t){t.data;s.getTask()})):this.$toastr.error("Please select resource to assign","Error!")},getUser:function(){var t=this;axios.get("/user").then((function(s){var a=s.data;t.users=a}))},getTask:function(){var t=this;axios.get("/task/".concat(this.$route.params.id)).then((function(s){var a=s.data;t.task=a}))},store:function(){var t=this;0!=this.$refs.myVueDropzone.getAcceptedFiles().length?axios.post("task",this.task).then((function(s){var a=s.data;t.$refs.myVueDropzone.dropzone.options.url=window.axios.defaults.baseURL+"task/".concat(a.data.id,"/files/upload"),setTimeout((function(){t.$refs.myVueDropzone.processQueue()}),500)})).catch((function(s){console.log(s);var a=s.response.data.errors;Object.keys(a).forEach((function(s){t.$toastr.error(a[s],"Error!")}))})):this.$toastr.error("Please attach document to proceed","Error!")}},watch:{}};const r=(0,a(1900).Z)(n,(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row page-titles mx-0"},[a("div",{staticClass:"col-sm-6 p-md-0"},[a("div",{staticClass:"welcome-text"},[a("h4",[t._v(t._s(t.$route.meta.title))])])]),t._v(" "),t._m(0)]),t._v(" "),t.task?a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-12"},[a("div",{staticClass:"card task-card"},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"row align-items-center"},[a("div",{staticClass:"col-md-6 text-md-left text-center"},[a("h4",{directives:[{name:"can",rawName:"v-can",value:4,expression:"4"}],staticClass:"client_name"},[t._v(t._s(t.task.client.name))]),t._v(" "),a("h6",{directives:[{name:"can",rawName:"v-can",value:5,expression:"5"}],staticClass:"client_email"},[t._v(t._s(t.task.client.email))])]),t._v(" "),a("div",{staticClass:"col-md-6 text-md-right text-center mt-3 mt-md-0"},[a("p",{staticClass:"date-time-task"},[a("b",[t._v("Task Created on")]),t._v(": "+t._s(t.task.created_date)+"\n                            ")]),t._v(" "),3==t.task.type?a("p",{staticClass:"date-time-task"},[t._v("\n                                "+t._s(t.task.date)+" | "+t._s(t.task.time)+"\n                            ")]):t._e(),t._v(" "),0==t.task.type?a("h5",{staticClass:"badge tx-5"},[t._m(1)]):t._e(),t._v(" "),1==t.task.type?a("h5",{staticClass:"badge tx-5"},[t._m(2)]):t._e(),t._v(" "),2==t.task.type?a("h5",{staticClass:"badge tx-5"},[t._m(3)]):t._e(),t._v(" "),3==t.task.type?a("h5",{staticClass:"badge tx-5"},[t._m(4)]):t._e()])]),t._v(" "),a("div",{staticClass:"row mt-4"},[a("div",{staticClass:"col-lg-12"},[a("p",{staticClass:"task--description"},[a("strong",[t._v("Subject:")]),t._v(" "),a("br"),t._v("\n                                "+t._s(t.task.title)+"\n                            ")])])]),t._v(" "),a("div",{staticClass:"row mt-4"},[a("div",{staticClass:"col-lg-12"},[a("h5",{staticClass:"tx-bold"},[t._v("Task Details")]),t._v(" "),a("div",{attrs:{id:"showmore-1","data-showmore":""}},[a("div",{staticClass:"custom-css"},[a("pre",[a("p",[t._v(t._s(t.task.description))])])])])]),t._v(" "),a("div",{directives:[{name:"can",rawName:"v-can",value:2,expression:"2"}],staticClass:"col-lg-12 mt-lg-0 mt-3"},[a("h5",{staticClass:"tx-bold"},[t._v("Internal Notes")]),t._v(" "),a("div",{staticClass:"notes-wrap"},t._l(t.task.notes,(function(s,e){return a("div",{key:e,staticClass:"note row"},[a("div",{staticClass:"col-md-11 col-sm-11 col-xs-11"},[a("p",{staticClass:"post-response"},[t._v("\n                                            "+t._s(s.note)+"\n                                        ")]),t._v(" "),a("small",{staticClass:"posted-by"},[t._v("By "),a("span",[t._v(t._s(s.user.name))]),t._v("\n                                            on "+t._s(s.created_date)+"\n                                        ")])]),t._v(" "),a("div",{directives:[{name:"can",rawName:"v-can",value:3,expression:"3"}],staticClass:"col-md-1 col-sm-1 col-xs-1"},[s.isauthor?a("p",{staticClass:"delete"},[a("a",{attrs:{href:"javascript:void(0)"},on:{click:function(a){return t.deleteNote(s.id)}}},[a("i",{staticClass:"fa fa-times"})])]):t._e()])])})),0),t._v(" "),a("div",{staticClass:"row notes-div"},[a("div",{staticClass:"col-12 post-a-note"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.note,expression:"note"}],staticClass:"form-control",attrs:{id:"note-text",cols:"30",rows:"4",maxlength:"1200"},domProps:{value:t.note},on:{input:function(s){s.target.composing||(t.note=s.target.value)}}})])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 text-right mt-3"},[a("button",{staticClass:"btn btn-handy-task",on:{click:function(s){return t.addNote()}}},[t._v("ADD\n                                        NOTE\n                                    ")])])])])]),t._v(" "),a("div",{staticClass:"row mt-4"},[a("div",{staticClass:"col-lg-4 col-md-6"},[a("label",{staticClass:"task-d-label",attrs:{for:""}},[t._v("Status")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.task.status,expression:"task.status"}],staticClass:"form-control status",attrs:{name:"status_id",id:"status_id"},on:{change:function(s){var a=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.task,"status",s.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"0"}},[t._v("Pending")]),t._v(" "),a("option",{attrs:{value:"1"}},[t._v("Active")]),t._v(" "),a("option",{attrs:{value:"2"}},[t._v("WIP")]),t._v(" "),a("option",{attrs:{value:"3"}},[t._v("Complete")]),t._v(" "),a("option",{attrs:{value:"4"}},[t._v("Cancel")])]),t._v(" "),a("div",{staticClass:"flex-c"},[a("button",{staticClass:"btn btn-handy-task",on:{click:function(s){return t.changeStatus(t.task.id)}}},[t._v("Change\n                                ")]),t._v(" "),a("span",{staticClass:"update-meta"})])]),t._v(" "),a("div",{directives:[{name:"can",rawName:"v-can",value:12,expression:"12"}],staticClass:"col-lg-4 col-md-6"},[a("label",{staticClass:"task-d-label",attrs:{for:""}},[t._v("Assign")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.task.user_id,expression:"task.user_id"}],staticClass:"form-control",attrs:{name:"resource_id",id:"resource_id"},on:{change:function(s){var a=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.task,"user_id",s.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("::Resource::")]),t._v(" "),t._l(t.users,(function(s,e){return a("option",{key:e,domProps:{value:s.id}},[t._v(t._s(s.name)+"\n                                ")])}))],2),t._v(" "),a("div",{staticClass:"flex-c"},[a("button",{staticClass:"btn btn-handy-task",on:{click:function(s){return t.assignResource(t.task.id)}}},[t._v("Assign\n                                ")]),t._v(" "),a("span",{staticClass:"update-meta"})])])]),t._v(" "),a("div",{staticClass:"row mt-4"},[a("div",{staticClass:"col-lg-4 col-md-6"},[a("label",{staticClass:"task-d-label",attrs:{for:""}},[t._v("Charge by Tasks:")]),t._v(" "),a("div",{staticClass:"d-flex"},[a("span",{staticClass:"minus",staticStyle:{height:"38px",margin:"0px"},on:{click:function(s){1==t.charge?t.charge=1:t.charge--}}},[t._v("-")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.charge,expression:"charge"}],staticClass:"m-0 task-input custom-form-control task_count",staticStyle:{"border-radius":"0px"},attrs:{type:"text"},domProps:{value:t.charge},on:{change:function(s){t.charge<1?t.charge=1:t.charge},input:function(s){s.target.composing||(t.charge=s.target.value)}}}),t._v(" "),a("span",{staticClass:"plus",staticStyle:{height:"38px"},on:{click:function(s){t.charge++}}},[t._v("+")])]),t._v(" "),t._m(5)])]),t._v(" "),a("div",{staticClass:"row mt-4"},[a("div",{staticClass:"col-lg-12 col-md-12"},[a("div",{staticClass:"read-content-attachment"},[a("h6",[a("i",{staticClass:"fa fa-download mb-2"}),t._v(" Attachments\n                                    "),a("span",[t._v("("+t._s(t.task.media.length)+")")])]),t._v(" "),a("div",{staticClass:"row attachment"},t._l(t.task.media,(function(s,e){return a("div",{key:e,staticClass:"col-auto"},[a("a",{staticClass:"text-muted",attrs:{download:"",href:s.full_url}},[t._v(t._s(s.file_name))])])})),0)])])])]),t._v(" "),a("div",{staticClass:"card-footer"},[a("div",{staticClass:"row my-2"},[a("div",{staticClass:"col-12 text-center"},[a("button",{directives:[{name:"can",rawName:"v-can",value:1,expression:"1"}],staticClass:"btn btn-handy-task mr-md-2 mr-0",class:Number(t.task.is_extensive)?"bg-warning":"bg-danger",domProps:{textContent:t._s(Number(t.task.is_extensive)?"Make Task Non Extensive":"Make Task Extensive")},on:{click:t.makeTaskExtensive}}),t._v(" "),a("router-link",{staticClass:"btn btn-handy-task mr-md-2 mr-0",attrs:{to:{name:"task.logs",params:{id:t.task.id}}}},[t._v("View Activity Logs")])],1)])])])])]):t._e()])}),[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"col-sm-6 p-md-0 justify-content-sm-end mt-2 mt-sm-0 d-flex"},[a("ol",{staticClass:"breadcrumb"},[a("li",{staticClass:"breadcrumb-item"},[a("a",{attrs:{href:"javascript:void(0)"}},[t._v("Home")])]),t._v(" "),a("li",{staticClass:"breadcrumb-item"},[a("a",{attrs:{href:"javascript:void(0)"}},[t._v("All Task")])]),t._v(" "),a("li",{staticClass:"breadcrumb-item active"},[a("a",{attrs:{href:"javascript:void(0)"}},[t._v("Task Detail")])])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("span",{staticClass:"badge light badge-default"},[t._v("\n                                    Task Type: "),a("b",[t._v("NONE")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("span",{staticClass:"badge light badge-success"},[t._v("\n                                    Task Type: "),a("b",[t._v("CALLING")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("span",{staticClass:"badge light badge-warning"},[t._v("\n                                    Task Type: "),a("b",[t._v("PRIORITY")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("span",{staticClass:"badge light badge-danger"},[t._v("\n                                    Task Type: "),a("b",[t._v("SCHEDULE OR RECURRING")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"flex-c"},[a("button",{staticClass:"btn btn-handy-task",attrs:{type:"submit",onclick:"chargeTask('6')"}},[t._v("Charge\n                                    Now")])])}],!1,null,null,null).exports}}]);